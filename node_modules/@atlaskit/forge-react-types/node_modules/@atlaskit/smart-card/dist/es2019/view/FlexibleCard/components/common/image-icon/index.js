import _extends from "@babel/runtime/helpers/extends";
import React from 'react';
import ImageLoader from 'react-render-image';
import { fg } from '@atlaskit/platform-feature-flags';
import { LoadingSkeletonNew, LoadingSkeletonOld } from '../loading-skeleton';
const ImageIcon = ({
  defaultIcon,
  testId,
  url,
  width,
  height,
  onError,
  onLoad
}) => /*#__PURE__*/React.createElement(ImageLoader, _extends({
  src: url
}, fg('platform-smart-card-icon-migration') ? {
  loading: /*#__PURE__*/React.createElement(LoadingSkeletonNew, {
    testId: `${testId}-loading`,
    width: width,
    height: height
  }),
  loaded: /*#__PURE__*/React.createElement("img", {
    src: url,
    "data-testid": `${testId}-image`,
    alt: "",
    style: {
      width,
      height
    }
  })
} : {
  loading: /*#__PURE__*/React.createElement(LoadingSkeletonOld, {
    testId: `${testId}-loading`
  }),
  // eslint-disable-next-line jsx-a11y/alt-text
  loaded: /*#__PURE__*/React.createElement("img", {
    src: url,
    "data-testid": `${testId}-image`
  })
}, {
  errored: defaultIcon,
  onError: onError,
  onLoad: onLoad
}));
export default ImageIcon;