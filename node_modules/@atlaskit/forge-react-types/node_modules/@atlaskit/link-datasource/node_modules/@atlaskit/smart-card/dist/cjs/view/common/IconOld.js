"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.blockCardIconImageClassName = exports.IconOld = void 0;
var _react = _interopRequireDefault(require("react"));
var _react2 = require("@emotion/react");
var _reactRenderImage = _interopRequireDefault(require("react-render-image"));
var _link = _interopRequireDefault(require("@atlaskit/icon/core/migration/link"));
var _utils = require("./utils");
/**
 * @jsxRuntime classic
 * @jsx jsx
 */

// eslint-disable-next-line @atlaskit/ui-styling-standard/use-compiled -- Ignored via go/DSP-18766

/**
 * Class name for selecting non-flexible block card icon image
 *
 * @deprecated {@link https://hello.jira.atlassian.cloud/browse/ENGHEALTH-6878 Internal documentation for deprecation (no external access)}
 * Using this selctor is deprecated as once the flexible block card feature flag is removed, this class will no longer be used.
 */
var blockCardIconImageClassName = exports.blockCardIconImageClassName = 'block-card-icon-image';
var getImageStyles = function getImageStyles(isFlexibleUi) {
  if (isFlexibleUi) {
    return;
  }
  return (0, _react2.css)({
    // eslint-disable-next-line @atlaskit/ui-styling-standard/no-imported-style-values, @atlaskit/ui-styling-standard/no-unsafe-values -- Ignored via go/DSP-18766
    height: (0, _utils.gs)(2),
    // eslint-disable-next-line @atlaskit/ui-styling-standard/no-imported-style-values, @atlaskit/ui-styling-standard/no-unsafe-values -- Ignored via go/DSP-18766
    width: (0, _utils.gs)(2)
  });
};
var getSpanStyles = function getSpanStyles(isFlexibleUi) {
  if (isFlexibleUi) {
    return;
  }
  return (0, _react2.css)({
    // eslint-disable-next-line @atlaskit/ui-styling-standard/no-imported-style-values, @atlaskit/ui-styling-standard/no-unsafe-values -- Ignored via go/DSP-18766
    height: (0, _utils.gs)(2.5),
    // eslint-disable-next-line @atlaskit/ui-styling-standard/no-imported-style-values, @atlaskit/ui-styling-standard/no-unsafe-values -- Ignored via go/DSP-18766
    width: (0, _utils.gs)(2),
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center'
  });
};
var IconOld = exports.IconOld = function IconOld(_ref) {
  var url = _ref.url,
    icon = _ref.icon,
    defaultIcon = _ref.defaultIcon,
    _ref$testId = _ref.testId,
    testId = _ref$testId === void 0 ? 'block-card-icon' : _ref$testId,
    _ref$isFlexibleUi = _ref.isFlexibleUi,
    isFlexibleUi = _ref$isFlexibleUi === void 0 ? false : _ref$isFlexibleUi;
  var placeholder = defaultIcon || (0, _react2.jsx)(_link.default, {
    label: "link",
    LEGACY_size: "small",
    testId: "".concat(testId, "-default"),
    color: "currentColor"
  });
  var image = url && (0, _react2.jsx)(_reactRenderImage.default, {
    src: url,
    loaded: (0, _react2.jsx)("img", {
      // eslint-disable-next-line @atlaskit/design-system/consistent-css-prop-usage -- Ignored via go/DSP-18766
      css: getImageStyles(isFlexibleUi),
      src: url,
      alt: "",
      "data-testid": "".concat(testId, "-image")
    }),
    errored: placeholder
  });
  return (0, _react2.jsx)("span", {
    // eslint-disable-next-line @atlaskit/design-system/consistent-css-prop-usage -- Ignored via go/DSP-18766
    css: getSpanStyles(isFlexibleUi),
    "data-testid": testId
    // eslint-disable-next-line @atlaskit/ui-styling-standard/no-classname-prop -- Ignored via go/DSP-18766
    ,
    className: blockCardIconImageClassName
  }, icon || image || placeholder);
};