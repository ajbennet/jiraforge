import { extractAri, extractDateCreated, extractDateUpdated, extractLink, extractPersonCreatedBy, extractPersonUpdatedBy, extractProvider, extractTitle } from '../common';
import { extractPreview } from '../common/preview/extractPreview';
import { extractEntity, extractEntityEmbedUrl, extractEntityProvider, isEntityPresent } from '../entity';
export const extractSmartLinkTitle = (response, removeTextHighlightingFromTitle) => {
  if (isEntityPresent(response)) {
    var _extractEntity;
    return (_extractEntity = extractEntity(response)) === null || _extractEntity === void 0 ? void 0 : _extractEntity.displayName;
  }
  return extractTitle(response === null || response === void 0 ? void 0 : response.data, removeTextHighlightingFromTitle);
};
export const extractSmartLinkUrl = response => {
  if (isEntityPresent(response)) {
    var _extractEntity2;
    return (_extractEntity2 = extractEntity(response)) === null || _extractEntity2 === void 0 ? void 0 : _extractEntity2.url;
  }
  return extractLink(response === null || response === void 0 ? void 0 : response.data);
};
export const extractSmartLinkAri = response => {
  if (isEntityPresent(response)) {
    var _extractEntity3;
    return (_extractEntity3 = extractEntity(response)) === null || _extractEntity3 === void 0 ? void 0 : _extractEntity3.ari;
  }
  const data = response === null || response === void 0 ? void 0 : response.data;
  return extractAri(data);
};
export const extractSmartLinkEmbed = (response, iframeUrlType) => {
  if (isEntityPresent(response)) {
    const embedUrl = extractEntityEmbedUrl(response);
    return embedUrl ? {
      src: embedUrl
    } : undefined;
  }
  return extractPreview(response === null || response === void 0 ? void 0 : response.data, 'web', iframeUrlType);
};
export const extractSmartLinkProvider = response => {
  if (isEntityPresent(response)) {
    return extractEntityProvider(response);
  }
  return (response === null || response === void 0 ? void 0 : response.data) && extractProvider(response === null || response === void 0 ? void 0 : response.data);
};
export const extractSmartLinkCreatedOn = response => {
  if (isEntityPresent(response)) {
    var _extractEntity4;
    return (_extractEntity4 = extractEntity(response)) === null || _extractEntity4 === void 0 ? void 0 : _extractEntity4.createdAt;
  }
  return (response === null || response === void 0 ? void 0 : response.data) && extractDateCreated(response.data);
};
export const extractSmartLinkModifiedOn = response => {
  if (isEntityPresent(response)) {
    var _extractEntity5;
    return (_extractEntity5 = extractEntity(response)) === null || _extractEntity5 === void 0 ? void 0 : _extractEntity5.lastUpdatedAt;
  }
  return (response === null || response === void 0 ? void 0 : response.data) && extractDateUpdated(response.data);
};
export const extractSmartLinkCreatedBy = response => {
  if (!response || !response.data) {
    return undefined;
  }
  if (isEntityPresent(response)) {
    var _extractEntity6, _extractEntity6$creat;
    return (_extractEntity6 = extractEntity(response)) === null || _extractEntity6 === void 0 ? void 0 : (_extractEntity6$creat = _extractEntity6.createdBy) === null || _extractEntity6$creat === void 0 ? void 0 : _extractEntity6$creat.id;
  }
  const persons = extractPersonCreatedBy(response.data);
  return !!(persons !== null && persons !== void 0 && persons.length) ? persons[0].name : undefined;
};
export const extractSmartLinkModifiedBy = response => {
  if (!response || !response.data) {
    return undefined;
  }
  if (isEntityPresent(response)) {
    var _extractEntity7, _extractEntity7$lastU;
    return (_extractEntity7 = extractEntity(response)) === null || _extractEntity7 === void 0 ? void 0 : (_extractEntity7$lastU = _extractEntity7.lastUpdatedBy) === null || _extractEntity7$lastU === void 0 ? void 0 : _extractEntity7$lastU.id;
  }
  const person = extractPersonUpdatedBy(response.data);
  return person ? person.name : undefined;
};