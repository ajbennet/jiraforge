"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.extractSmartLinkUrl = exports.extractSmartLinkTitle = exports.extractSmartLinkProvider = exports.extractSmartLinkModifiedOn = exports.extractSmartLinkModifiedBy = exports.extractSmartLinkEmbed = exports.extractSmartLinkCreatedOn = exports.extractSmartLinkCreatedBy = exports.extractSmartLinkAri = void 0;
var _common = require("../common");
var _extractPreview = require("../common/preview/extractPreview");
var _entity = require("../entity");
var extractSmartLinkTitle = exports.extractSmartLinkTitle = function extractSmartLinkTitle(response, removeTextHighlightingFromTitle) {
  if ((0, _entity.isEntityPresent)(response)) {
    var _extractEntity;
    return (_extractEntity = (0, _entity.extractEntity)(response)) === null || _extractEntity === void 0 ? void 0 : _extractEntity.displayName;
  }
  return (0, _common.extractTitle)(response === null || response === void 0 ? void 0 : response.data, removeTextHighlightingFromTitle);
};
var extractSmartLinkUrl = exports.extractSmartLinkUrl = function extractSmartLinkUrl(response) {
  if ((0, _entity.isEntityPresent)(response)) {
    var _extractEntity2;
    return (_extractEntity2 = (0, _entity.extractEntity)(response)) === null || _extractEntity2 === void 0 ? void 0 : _extractEntity2.url;
  }
  return (0, _common.extractLink)(response === null || response === void 0 ? void 0 : response.data);
};
var extractSmartLinkAri = exports.extractSmartLinkAri = function extractSmartLinkAri(response) {
  if ((0, _entity.isEntityPresent)(response)) {
    var _extractEntity3;
    return (_extractEntity3 = (0, _entity.extractEntity)(response)) === null || _extractEntity3 === void 0 ? void 0 : _extractEntity3.ari;
  }
  var data = response === null || response === void 0 ? void 0 : response.data;
  return (0, _common.extractAri)(data);
};
var extractSmartLinkEmbed = exports.extractSmartLinkEmbed = function extractSmartLinkEmbed(response, iframeUrlType) {
  if ((0, _entity.isEntityPresent)(response)) {
    var embedUrl = (0, _entity.extractEntityEmbedUrl)(response);
    return embedUrl ? {
      src: embedUrl
    } : undefined;
  }
  return (0, _extractPreview.extractPreview)(response === null || response === void 0 ? void 0 : response.data, 'web', iframeUrlType);
};
var extractSmartLinkProvider = exports.extractSmartLinkProvider = function extractSmartLinkProvider(response) {
  if ((0, _entity.isEntityPresent)(response)) {
    return (0, _entity.extractEntityProvider)(response);
  }
  return (response === null || response === void 0 ? void 0 : response.data) && (0, _common.extractProvider)(response === null || response === void 0 ? void 0 : response.data);
};
var extractSmartLinkCreatedOn = exports.extractSmartLinkCreatedOn = function extractSmartLinkCreatedOn(response) {
  if ((0, _entity.isEntityPresent)(response)) {
    var _extractEntity4;
    return (_extractEntity4 = (0, _entity.extractEntity)(response)) === null || _extractEntity4 === void 0 ? void 0 : _extractEntity4.createdAt;
  }
  return (response === null || response === void 0 ? void 0 : response.data) && (0, _common.extractDateCreated)(response.data);
};
var extractSmartLinkModifiedOn = exports.extractSmartLinkModifiedOn = function extractSmartLinkModifiedOn(response) {
  if ((0, _entity.isEntityPresent)(response)) {
    var _extractEntity5;
    return (_extractEntity5 = (0, _entity.extractEntity)(response)) === null || _extractEntity5 === void 0 ? void 0 : _extractEntity5.lastUpdatedAt;
  }
  return (response === null || response === void 0 ? void 0 : response.data) && (0, _common.extractDateUpdated)(response.data);
};
var extractSmartLinkCreatedBy = exports.extractSmartLinkCreatedBy = function extractSmartLinkCreatedBy(response) {
  if (!response || !response.data) {
    return undefined;
  }
  if ((0, _entity.isEntityPresent)(response)) {
    var _extractEntity6;
    return (_extractEntity6 = (0, _entity.extractEntity)(response)) === null || _extractEntity6 === void 0 || (_extractEntity6 = _extractEntity6.createdBy) === null || _extractEntity6 === void 0 ? void 0 : _extractEntity6.id;
  }
  var persons = (0, _common.extractPersonCreatedBy)(response.data);
  return !!(persons !== null && persons !== void 0 && persons.length) ? persons[0].name : undefined;
};
var extractSmartLinkModifiedBy = exports.extractSmartLinkModifiedBy = function extractSmartLinkModifiedBy(response) {
  if (!response || !response.data) {
    return undefined;
  }
  if ((0, _entity.isEntityPresent)(response)) {
    var _extractEntity7;
    return (_extractEntity7 = (0, _entity.extractEntity)(response)) === null || _extractEntity7 === void 0 || (_extractEntity7 = _extractEntity7.lastUpdatedBy) === null || _extractEntity7 === void 0 ? void 0 : _extractEntity7.id;
  }
  var person = (0, _common.extractPersonUpdatedBy)(response.data);
  return person ? person.name : undefined;
};