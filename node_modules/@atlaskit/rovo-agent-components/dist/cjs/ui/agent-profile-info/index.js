"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.AgentProfileInfo = exports.AgentProfileCreator = void 0;
var _react = _interopRequireDefault(require("react"));
var _reactIntlNext = require("react-intl-next");
var _heading = _interopRequireDefault(require("@atlaskit/heading"));
var _logo = require("@atlaskit/logo");
var _primitives = require("@atlaskit/primitives");
var _skeleton = _interopRequireDefault(require("@atlaskit/skeleton"));
var _tooltip = _interopRequireDefault(require("@atlaskit/tooltip"));
var _hiddenIcon = require("../../common/ui/hidden-icon");
var _starIconButton = require("../../common/ui/star-icon-button");
var _messages = require("./messages");
var clickableItemStyles = (0, _primitives.xcss)({
  display: 'flex',
  alignItems: 'center',
  gap: 'space.050'
});
var nameStyles = (0, _primitives.xcss)({
  justifyContent: 'space-between',
  alignItems: 'flex-start'
});
var descriptionStyles = (0, _primitives.xcss)({
  marginTop: 'space.0',
  marginBottom: 'space.100'
});
var AgentProfileCreator = exports.AgentProfileCreator = function AgentProfileCreator(_ref) {
  var creator = _ref.creator,
    onCreatorLinkClick = _ref.onCreatorLinkClick,
    isLoading = _ref.isLoading;
  var _useIntl = (0, _reactIntlNext.useIntl)(),
    formatMessage = _useIntl.formatMessage;
  var getCreatorRender = function getCreatorRender() {
    if (isLoading) {
      return formatMessage(_messages.messages.agentCreatedBy, {
        creatorNameWithLink: /*#__PURE__*/_react.default.createElement(_skeleton.default, {
          testId: "agent-profile-creator-skeleton",
          isShimmering: true,
          height: 18,
          width: 100,
          borderRadius: 3
        })
      });
    }
    if (!creator) {
      return null;
    }
    if (creator.type === 'SYSTEM' || creator.type === 'OOTB') {
      return formatMessage(_messages.messages.agentCreatedBy, {
        creatorNameWithLink: /*#__PURE__*/_react.default.createElement(_primitives.Inline, {
          alignBlock: "center",
          testId: "atlassian-icon"
        }, /*#__PURE__*/_react.default.createElement(_logo.AtlassianIcon, {
          size: "small",
          appearance: "brand"
        }), /*#__PURE__*/_react.default.createElement(_primitives.Box, null, "Atlassian"))
      });
    }
    if (creator.type === 'CUSTOMER') {
      return formatMessage(_messages.messages.agentCreatedBy, {
        creatorNameWithLink: /*#__PURE__*/_react.default.createElement("a", {
          href: creator.profileLink,
          onClick: function onClick() {
            return onCreatorLinkClick();
          },
          target: "_blank"
        }, creator.name, ' ', creator.status === 'inactive' && formatMessage(_messages.messages.agentDeactivated))
      });
    }
    if (creator.type === 'THIRD_PARTY') {
      return formatMessage(_messages.messages.agentCreatedBy, {
        creatorNameWithLink: creator.name
      });
    }
    return null;
  };
  var creatorRender = getCreatorRender();
  return creatorRender ? /*#__PURE__*/_react.default.createElement(_primitives.Box, {
    xcss: clickableItemStyles
  }, /*#__PURE__*/_react.default.createElement(_logo.RovoIcon, {
    appearance: "brand",
    size: "small"
  }), creatorRender) : null;
};
var wrapperStyles = (0, _primitives.xcss)({
  marginBottom: 'space.100'
});
var tooltipWrapperStyles = (0, _primitives.xcss)({
  display: 'inline-flex',
  marginInline: 'space.100',
  position: 'relative',
  bottom: 'space.025'
});
var headingWrapperStyles = (0, _primitives.xcss)({
  position: 'relative'
});
var AgentProfileInfo = exports.AgentProfileInfo = function AgentProfileInfo(_ref2) {
  var agentName = _ref2.agentName,
    agentDescription = _ref2.agentDescription,
    creatorRender = _ref2.creatorRender,
    starCountRender = _ref2.starCountRender,
    isStarred = _ref2.isStarred,
    isHidden = _ref2.isHidden,
    onStarToggle = _ref2.onStarToggle;
  var _useIntl2 = (0, _reactIntlNext.useIntl)(),
    formatMessage = _useIntl2.formatMessage;
  return /*#__PURE__*/_react.default.createElement(_primitives.Stack, {
    space: "space.100",
    xcss: wrapperStyles
  }, /*#__PURE__*/_react.default.createElement(_primitives.Inline, {
    xcss: nameStyles,
    space: "space.100",
    alignBlock: "center"
  }, /*#__PURE__*/_react.default.createElement(_primitives.Box, {
    xcss: headingWrapperStyles
  }, /*#__PURE__*/_react.default.createElement(_heading.default, {
    as: "span",
    size: "xlarge"
  }, agentName), isHidden && /*#__PURE__*/_react.default.createElement(_primitives.Box, {
    xcss: tooltipWrapperStyles
  }, /*#__PURE__*/_react.default.createElement(_tooltip.default, {
    content: formatMessage(_messages.messages.hiddenTooltip),
    position: "top"
  }, /*#__PURE__*/_react.default.createElement(_hiddenIcon.HiddenIcon, {
    label: formatMessage(_messages.messages.hiddenIcon)
  })))), /*#__PURE__*/_react.default.createElement(_starIconButton.StarIconButton, {
    isStarred: isStarred,
    handleToggle: onStarToggle
  })), creatorRender, !!agentDescription && /*#__PURE__*/_react.default.createElement(_primitives.Box, {
    xcss: descriptionStyles,
    as: "p"
  }, agentDescription), starCountRender);
};