// lightweight script to scan the SSR response and collect all elements with data-ssr-placeholder attribute
// and save their size/positions in a map __SSR_PLACEHOLDERS_DIMENSIONS__ on the Window object. Each placeholderId is
// unique and maps to its corresponding elements bounding client rectangle dimensions.
export function collectSSRPlaceholderDimensions(document, window) {
  var enablePageLayoutPlaceholder = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  var ssrPlaceholders = document === null || document === void 0 ? void 0 : document.querySelectorAll('[data-ssr-placeholder]');
  ssrPlaceholders.forEach(function (elem) {
    var placeholderId = elem.getAttribute('data-ssr-placeholder');
    var boundingClient = elem.getBoundingClientRect();
    if (placeholderId) {
      window.__SSR_PLACEHOLDERS_DIMENSIONS__ = window.__SSR_PLACEHOLDERS_DIMENSIONS__ || {};
      window.__SSR_PLACEHOLDERS_DIMENSIONS__[placeholderId] = boundingClient;
    }
  });
  if (enablePageLayoutPlaceholder) {
    var pageLayoutRoot = document === null || document === void 0 ? void 0 : document.getElementById('unsafe-design-system-page-layout-root');
    if (pageLayoutRoot) {
      var boundingClient = pageLayoutRoot.getBoundingClientRect();
      window.__SSR_PLACEHOLDERS_DIMENSIONS__ = window.__SSR_PLACEHOLDERS_DIMENSIONS__ || {};
      window.__SSR_PLACEHOLDERS_DIMENSIONS__['page-layout.root'] = boundingClient;
    }
  }
}