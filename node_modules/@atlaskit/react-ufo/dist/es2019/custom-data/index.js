import { useContext, useMemo } from 'react';
import UFOInteractionContext from '../interaction-context';
import { getInteractionId } from '../interaction-id-context';
import { addCustomData } from '../interaction-metrics';
export default function UFOCustomData({
  data
}) {
  const interactionContext = useContext(UFOInteractionContext);
  useMemo(() => {
    if (!interactionContext) {
      return;
    }
    if (typeof (globalThis === null || globalThis === void 0 ? void 0 : globalThis.structuredClone) === 'function') {
      interactionContext.addCustomData(globalThis.structuredClone(data));
    } else {
      interactionContext.addCustomData(data);
    }
  }, [data, interactionContext]);
  return null;
}
export function addUFOCustomData(data) {
  const interactionId = getInteractionId();
  const currentInteractionId = interactionId.current;
  if (!currentInteractionId) {
    return;
  }
  if (typeof (globalThis === null || globalThis === void 0 ? void 0 : globalThis.structuredClone) === 'function') {
    addCustomData(currentInteractionId, [], globalThis.structuredClone(data));
  } else {
    addCustomData(currentInteractionId, [], data);
  }
}