"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.addUFOCustomData = addUFOCustomData;
exports.default = UFOCustomData;
var _react = require("react");
var _interactionContext = _interopRequireDefault(require("../interaction-context"));
var _interactionIdContext = require("../interaction-id-context");
var _interactionMetrics = require("../interaction-metrics");
function UFOCustomData(_ref) {
  var data = _ref.data;
  var interactionContext = (0, _react.useContext)(_interactionContext.default);
  (0, _react.useMemo)(function () {
    if (!interactionContext) {
      return;
    }
    if (typeof (globalThis === null || globalThis === void 0 ? void 0 : globalThis.structuredClone) === 'function') {
      interactionContext.addCustomData(globalThis.structuredClone(data));
    } else {
      interactionContext.addCustomData(data);
    }
  }, [data, interactionContext]);
  return null;
}
function addUFOCustomData(data) {
  var interactionId = (0, _interactionIdContext.getInteractionId)();
  var currentInteractionId = interactionId.current;
  if (!currentInteractionId) {
    return;
  }
  if (typeof (globalThis === null || globalThis === void 0 ? void 0 : globalThis.structuredClone) === 'function') {
    (0, _interactionMetrics.addCustomData)(currentInteractionId, [], globalThis.structuredClone(data));
  } else {
    (0, _interactionMetrics.addCustomData)(currentInteractionId, [], data);
  }
}