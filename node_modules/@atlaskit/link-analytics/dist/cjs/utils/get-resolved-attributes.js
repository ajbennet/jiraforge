"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getResolvedAttributes = void 0;
var _linkingCommon = require("@atlaskit/linking-common");
var _getDisplayCategory = require("./get-display-category");
/**
 * Returns a set of analytics attributes that be
 * derived from a JSON.LD response
 */
var getResolvedAttributes = exports.getResolvedAttributes = function getResolvedAttributes(linkDetails, details, linkStatus) {
  var _details$meta$request, _details$meta, _details$meta$key, _details$meta2, _details$meta$tenantI, _details$meta3, _details$meta$activat, _details$meta4, _details$meta$contain, _details$meta5, _details$meta$categor, _details$meta6, _details$meta$product, _details$meta7, _details$meta$subprod, _details$meta8, _details$meta$objectI, _details$meta9, _details$meta$resourc, _details$meta10;
  var status = linkStatus !== null && linkStatus !== void 0 ? linkStatus : details && (0, _linkingCommon.getStatus)(details);
  var displayCategory = linkDetails.displayCategory === 'link' ? 'link' : (0, _getDisplayCategory.getDisplayCategory)(status);
  return {
    status: status !== null && status !== void 0 ? status : null,
    statusDetails: (_details$meta$request = details === null || details === void 0 || (_details$meta = details.meta) === null || _details$meta === void 0 || (_details$meta = _details$meta.requestAccess) === null || _details$meta === void 0 ? void 0 : _details$meta.accessType) !== null && _details$meta$request !== void 0 ? _details$meta$request : null,
    displayCategory: displayCategory,
    extensionKey: (_details$meta$key = details === null || details === void 0 || (_details$meta2 = details.meta) === null || _details$meta2 === void 0 ? void 0 : _details$meta2.key) !== null && _details$meta$key !== void 0 ? _details$meta$key : null,
    destinationTenantId: (_details$meta$tenantI = details === null || details === void 0 || (_details$meta3 = details.meta) === null || _details$meta3 === void 0 ? void 0 : _details$meta3.tenantId) !== null && _details$meta$tenantI !== void 0 ? _details$meta$tenantI : null,
    destinationActivationId: (_details$meta$activat = details === null || details === void 0 || (_details$meta4 = details.meta) === null || _details$meta4 === void 0 ? void 0 : _details$meta4.activationId) !== null && _details$meta$activat !== void 0 ? _details$meta$activat : null,
    destinationContainerId: (_details$meta$contain = details === null || details === void 0 || (_details$meta5 = details.meta) === null || _details$meta5 === void 0 ? void 0 : _details$meta5.containerId) !== null && _details$meta$contain !== void 0 ? _details$meta$contain : null,
    destinationCategory: (_details$meta$categor = details === null || details === void 0 || (_details$meta6 = details.meta) === null || _details$meta6 === void 0 ? void 0 : _details$meta6.category) !== null && _details$meta$categor !== void 0 ? _details$meta$categor : null,
    destinationProduct: (_details$meta$product = details === null || details === void 0 || (_details$meta7 = details.meta) === null || _details$meta7 === void 0 ? void 0 : _details$meta7.product) !== null && _details$meta$product !== void 0 ? _details$meta$product : null,
    destinationSubproduct: (_details$meta$subprod = details === null || details === void 0 || (_details$meta8 = details.meta) === null || _details$meta8 === void 0 ? void 0 : _details$meta8.subproduct) !== null && _details$meta$subprod !== void 0 ? _details$meta$subprod : null,
    destinationObjectId: (_details$meta$objectI = details === null || details === void 0 || (_details$meta9 = details.meta) === null || _details$meta9 === void 0 ? void 0 : _details$meta9.objectId) !== null && _details$meta$objectI !== void 0 ? _details$meta$objectI : null,
    destinationObjectType: (_details$meta$resourc = details === null || details === void 0 || (_details$meta10 = details.meta) === null || _details$meta10 === void 0 ? void 0 : _details$meta10.resourceType) !== null && _details$meta$resourc !== void 0 ? _details$meta$resourc : null,
    canBeDatasource: ((details === null || details === void 0 ? void 0 : details.datasources) || []).length > 0
  };
};